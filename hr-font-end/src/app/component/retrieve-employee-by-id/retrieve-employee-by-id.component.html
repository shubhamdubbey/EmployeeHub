<div style="width: 400px; margin-left: 100px; margin-top: 30px;">
  <form [formGroup]="idForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="empId" class="form-label">Employee Id : </label>
      <input type="number" class="form-control" id="empId" name="empId"
             formControlName="id" placeholder="Ex: 100001">
      <span *ngIf="idForm.controls.id.invalid && idForm.controls.id.touched">
        <p style="color: red;">Employee Id's length must be 6</p>
      </span>
    </div>
    <div class="buttonContainer">
      <button [disabled]="idForm.invalid" type="submit" class="btn btn-dark">Search</button>
      <button type="reset" class="btn btn-dark" (click)="onReset()">Reset</button>
    </div>
  </form>
</div>

<!-- privilege alert -->
<div *ngIf="alertMessage" class="alert alert-danger mt-3" style="margin-left:100px; width:400px;">
  {{ alertMessage }}
</div>

<div>
  <table class="table" *ngIf="submitted && !noRecordFound && !reset">
    <thead>
      <tr>
        <th>Employee Id</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Phone Number</th>
        <th>Email Id</th>
        <th>Role</th>
        <th>Grade Id</th>
        <th>Manager Id</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ user.employeeId }}</td>
        <td>{{ user.firstName }}</td>
        <td>{{ user.lastName }}</td>
        <td>{{ user.phoneNumber }}</td>
        <td>{{ user.emailAddress }}</td>
        <td>{{ user.role }}</td>
        <td>{{ user.grade_id }}</td>
        <td>{{ user.managerId }}</td>
        <td>
          <!-- Only Admin and HR can see Delete button -->
          <button *ngIf="hasPrivilege(['ROLE_ADMIN','ROLE_HR'])"
                  style="width: 100px;"
                  (click)="deleteEmployee(user.employeeId)"
                  class="btn btn-dark btn-sm">
            Delete
          </button>
          <!-- Employees without privilege see a disabled delete -->
          <button *ngIf="!hasPrivilege(['ROLE_ADMIN','ROLE_HR'])"
                  style="width: 100px; cursor: not-allowed;"
                  class="btn btn-secondary btn-sm"
                  disabled>
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <h5 style="color:red; margin-left: 100px; margin-top: 30px;"
      *ngIf="submitted && noRecordFound && !reset">
    No records found
  </h5>
</div>